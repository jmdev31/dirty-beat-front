import{C as i}from"./CoursDataService-d70WKct5.js";import{_ as m,o as l,c as u,a as s,w as p,v as C,b as g,t as _,r as b,F as f,d as v,e as k,n as y}from"./index-1a_k6eiD.js";const A={name:"cours-details",props:["cours"],data(){return{currentCours:null,message:""}},watch:{cours:function(o){this.currentCours={...o},this.message=""}},methods:{updatePublished(o){i.update(this.currentCours.key,{published:o}).then(()=>{this.currentCours.published=o,this.message="Le status MAJ avec succès!"}).catch(e=>{console.log(e)})},updateCours(){const o={title:this.currentCours.title,description:this.currentCours.description,logo:this.currentCours.logo};i.update(this.currentCours.key,o).then(()=>{this.message="Article MAJ avec succès!"}).catch(e=>{console.log(e)})},deleteCours(){i.delete(this.currentCours.key).then(()=>{this.$emit("refreshList")}).catch(o=>{console.log(o)})}},mounted(){this.message="",this.currentCours={...this.cours}}},x={key:0,class:"edit-form border border-light m-2 p-2"},D=s("h4",null,"Cours Détails",-1),L={class:"form-group"},V=s("label",{for:"title"},"Titre",-1),P={class:"form-group"},w=s("label",{for:"description"},"Description",-1),U={class:"form-group"},I=s("label",{for:"description"},"Logo",-1),S={class:"form-group"},T=s("label",null,[s("strong",null,"Status:")],-1),z={key:1},B=s("br",null,null,-1),E=s("p",null,"Cliquez sur un article Por Favor",-1),F=[B,E];function M(o,e,c,a,t,n){return t.currentCours?(l(),u("div",x,[D,s("form",null,[s("div",L,[V,p(s("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":e[0]||(e[0]=r=>t.currentCours.title=r)},null,512),[[C,t.currentCours.title]])]),s("div",P,[w,p(s("input",{type:"text",class:"form-control",id:"description","onUpdate:modelValue":e[1]||(e[1]=r=>t.currentCours.description=r)},null,512),[[C,t.currentCours.description]])]),s("div",U,[I,p(s("input",{type:"text",class:"form-control",id:"description","onUpdate:modelValue":e[2]||(e[2]=r=>t.currentCours.logo=r)},null,512),[[C,t.currentCours.logo]])]),s("div",S,[T,g(" "+_(t.currentCours.published?"Publié":"En attente"),1)])]),t.currentCours.published?(l(),u("button",{key:0,class:"badge badge-primary me-2",onClick:e[3]||(e[3]=r=>n.updatePublished(!1))}," Dépublier ")):(l(),u("button",{key:1,class:"badge badge-primary me-2",onClick:e[4]||(e[4]=r=>n.updatePublished(!0))}," Publier ")),s("button",{class:"badge badge-danger me-2",onClick:e[5]||(e[5]=(...r)=>n.deleteCours&&n.deleteCours(...r))}," Delete "),s("button",{type:"submit",class:"badge badge-success",onClick:e[6]||(e[6]=(...r)=>n.updateCours&&n.updateCours(...r))}," Update "),s("p",null,_(t.message),1)])):(l(),u("div",z,F))}const N=m(A,[["render",M]]),J={name:"cours-list",components:{CoursDetails:N},data(){return{cours:[],currentCours:null,currentIndex:-1}},methods:{onDataChange(o){let e=[];o.forEach(c=>{let a=c.key,t=c.val();e.push({key:a,title:t.title,description:t.description,logo:t.logo,published:t.published})}),this.cours=e},refreshList(){this.currentCours=null,this.currentIndex=-1},setActiveArticle(o,e){this.currentCours=o,this.currentIndex=e},removeAllCours(){i.deleteAll().then(()=>{this.refreshList()}).catch(o=>{console.log(o)})}},mounted(){i.getAll().on("value",this.onDataChange)},beforeUnmount(){i.getAll().off("value",this.onDataChange)}},R={class:"list row bg-warning"},q={class:"col-md-6"},$=s("h4",null,"Cours List",-1),j={class:"list-group"},G=["onClick"],H={class:"col-md-6"},K={key:0},O={key:1},Q=s("br",null,null,-1),W=s("p",null,"Veuillez choisir un Cours...",-1),X=[Q,W];function Y(o,e,c,a,t,n){const r=b("cours-details");return l(),u("div",R,[s("div",q,[$,s("ul",j,[(l(!0),u(f,null,v(t.cours,(d,h)=>(l(),u("li",{class:y(["list-group-item",{active:h==t.currentIndex}]),key:h,onClick:Z=>n.setActiveArticle(d,h)},_(d.title),11,G))),128))]),s("button",{class:"m-3 btn btn-sm btn-danger",onClick:e[0]||(e[0]=(...d)=>n.removeAllCours&&n.removeAllCours(...d))},"Tout Suppr")]),s("div",H,[t.currentCours?(l(),u("div",K,[k(r,{cours:t.currentCours,onRefreshList:n.refreshList},null,8,["cours","onRefreshList"])])):(l(),u("div",O,X))])])}const te=m(J,[["render",Y]]);export{te as default};
